<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>JoeMac Avatar</title>
<link rel="preconnect" href="https://fonts.googleapis.com" />
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
<link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600&display=swap" rel="stylesheet" />
<style>
  * { margin: 0; padding: 0; box-sizing: border-box; }

  html, body {
    width: 100%;
    height: 100%;
    overflow: hidden;
    background: transparent !important;
    -webkit-app-region: no-drag;
    font-family: 'Space Grotesk', system-ui, sans-serif;
  }

  #app {
    width: 100%;
    height: 100%;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: flex-end;
    padding-bottom: 5px;
    padding-top: 60px;
    position: relative;
    user-select: none;
    background: transparent !important;
  }

  /* ─── Speech bubble ─── */
  #speech-bubble {
    position: absolute;
    bottom: 310px;
    left: 50%;
    transform: translateX(-50%);
    background: rgba(255, 255, 255, 0.96);
    color: #1a1a2e;
    border-radius: 14px;
    padding: 10px 14px;
    max-width: 250px;
    width: max-content;
    font-size: 13px;
    font-weight: 500;
    line-height: 1.4;
    word-wrap: break-word;
    white-space: pre-wrap;
    box-shadow: 0 4px 20px rgba(0,0,0,0.18), 0 1px 4px rgba(0,0,0,0.10);
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.3s ease;
    z-index: 100;
    filter: drop-shadow(0 2px 6px rgba(0,0,0,0.12));
  }
  #speech-bubble::after {
    content: '';
    position: absolute;
    bottom: -8px;
    left: 50%;
    transform: translateX(-50%);
    width: 0; height: 0;
    border-left: 9px solid transparent;
    border-right: 9px solid transparent;
    border-top: 9px solid rgba(255,255,255,0.96);
  }
  #speech-bubble.visible + #bmo-wrapper {
    /* slight nudge when bubble is showing */
  }
  #speech-bubble.visible { opacity: 1; }

  /* ─── BMO container ─── */
  #bmo-wrapper {
    position: relative;
    width: 225px;
    height: 300px;
    -webkit-app-region: no-drag;
    cursor: grab;
  }
  #bmo-wrapper:active { cursor: grabbing; }
  #bmo-wrapper svg { width: 100%; height: 100%; overflow: visible; }

  /* ─── IDLE float ─── */
  @keyframes bmo-float {
    0%, 100% { transform: translateY(0px); }
    40%      { transform: translateY(-5px); }
    60%      { transform: translateY(-3px); }
  }
  @keyframes shadow-pulse {
    0%, 100% { transform: scaleX(1); opacity: 0.7; }
    40%      { transform: scaleX(0.85); opacity: 0.5; }
    60%      { transform: scaleX(0.9); opacity: 0.55; }
  }
  #bmo-wrapper {
    animation: bmo-float 4s ease-in-out infinite;
    transform-origin: center bottom;
  }
  #bmo-shadow {
    animation: shadow-pulse 4s ease-in-out infinite;
  }

  /* ─── IDLE arm sway (translate only — rotate breaks SVG pivot) ─── */
  @keyframes idle-sway-left {
    0%, 100% { transform: translateX(0px) translateY(0px); }
    30%      { transform: translateX(-2px) translateY(-1px); }
    70%      { transform: translateX(1px) translateY(1px); }
  }
  @keyframes idle-sway-right {
    0%, 100% { transform: translateX(0px) translateY(0px); }
    40%      { transform: translateX(2px) translateY(-1px); }
    80%      { transform: translateX(-1px) translateY(1px); }
  }
  #left-arm {
    animation: idle-sway-left 5s ease-in-out infinite;
  }
  #right-arm {
    animation: idle-sway-right 5.5s ease-in-out infinite;
  }

  /* ─── WAVE ─── */
  @keyframes arm-wave {
    0%   { transform: translate(0, 0); }
    15%  { transform: translate(10px, -30px); }
    30%  { transform: translate(5px, -10px); }
    45%  { transform: translate(12px, -35px); }
    60%  { transform: translate(6px, -15px); }
    75%  { transform: translate(10px, -30px); }
    100% { transform: translate(0, 0); }
  }
  #left-arm.wave {
    animation: arm-wave 0.6s ease-in-out 3;
  }
  #right-arm.wave {
    animation: arm-wave 0.6s ease-in-out 3;
  }

  /* ─── THINKING ─── */
  @keyframes bmo-think {
    0%, 100% { transform: translateY(0px); }
    50%      { transform: translateY(-3px); }
  }
  #bmo-wrapper.thinking { animation: bmo-think 1.5s ease-in-out infinite; }

  @keyframes arm-think {
    0%, 100% { transform: rotate(0deg); }
    50%      { transform: translate(15px, -20px); }
  }
  #left-arm.thinking {
    animation: arm-think 1.5s ease-in-out infinite;
    
  }

  @keyframes eye-look-side {
    0%, 100% { transform: translateX(0); }
    50%      { transform: translateX(4px); }
  }
  #bmo-wrapper.thinking #left-eye,
  #bmo-wrapper.thinking #right-eye {
    animation: eye-look-side 1.5s ease-in-out infinite;
  }

  /* ─── SPEAKING ─── */
  @keyframes bmo-speak-bob {
    0%, 100% { transform: translateY(0px); }
    25%      { transform: translateY(-4px); }
    75%      { transform: translateY(-1px); }
  }
  #bmo-wrapper.speaking { animation: bmo-speak-bob 0.35s ease-in-out infinite; }

  @keyframes arm-gesture-left {
    0%, 100% { transform: translate(0, 0); }
    30%      { transform: translate(-8px, -12px); }
    60%      { transform: translate(4px, 5px); }
  }
  @keyframes arm-gesture-right {
    0%, 100% { transform: translate(0, 0); }
    30%      { transform: translate(8px, -10px); }
    60%      { transform: translate(-3px, 4px); }
  }
  #bmo-wrapper.speaking #left-arm {
    animation: arm-gesture-left 0.6s ease-in-out infinite;
    
  }
  #bmo-wrapper.speaking #right-arm {
    animation: arm-gesture-right 0.6s ease-in-out 0.1s infinite;
    
  }

  @keyframes screen-glow {
    0%, 100% { filter: drop-shadow(0 0 2px rgba(209,242,220,0.3)); }
    50%      { filter: drop-shadow(0 0 10px rgba(209,242,220,0.6)); }
  }
  #bmo-wrapper.speaking #screen { animation: screen-glow 0.5s ease-in-out infinite; }

  /* ─── HAPPY ─── */
  @keyframes bmo-bounce {
    0%, 100% { transform: translateY(0px) scale(1); }
    30%      { transform: translateY(-14px) scale(1.03); }
    50%      { transform: translateY(-8px) scale(1.01); }
    70%      { transform: translateY(-16px) scale(1.03); }
  }
  #bmo-wrapper.happy { animation: bmo-bounce 0.6s ease-in-out 2; }

  @keyframes arms-happy-left {
    0%, 100% { transform: translate(0, 0); }
    40%      { transform: translate(-15px, -25px); }
    70%      { transform: translate(-10px, -20px); }
  }
  @keyframes arms-happy-right {
    0%, 100% { transform: translate(0, 0); }
    40%      { transform: translate(15px, -25px); }
    70%      { transform: translate(10px, -20px); }
  }
  #bmo-wrapper.happy #left-arm {
    animation: arms-happy-left 0.6s ease-in-out 2;
    
  }
  #bmo-wrapper.happy #right-arm {
    animation: arms-happy-right 0.6s ease-in-out 2 0.05s;
    
  }

  /* ─── FLAILING (scared, picked up) ─── */
  @keyframes arm-flail-left {
    0%   { transform: translate(0, 0); }
    25%  { transform: translate(-15px, -20px); }
    50%  { transform: translate(5px, -8px); }
    75%  { transform: translate(-10px, -25px); }
    100% { transform: translate(0, 0); }
  }
  @keyframes arm-flail-right {
    0%   { transform: translate(0, 0); }
    25%  { transform: translate(15px, -18px); }
    50%  { transform: translate(-5px, -10px); }
    75%  { transform: translate(12px, -22px); }
    100% { transform: translate(0, 0); }
  }

  /* ─── SLEEP ─── */
  @keyframes bmo-sleep {
    0%, 100% { transform: translateY(0px) rotate(0deg); }
    30%      { transform: translateY(2px) rotate(2deg); }
    70%      { transform: translateY(2px) rotate(-1deg); }
  }

  /* ─── BLINK ─── */
  @keyframes blink {
    0%, 90%, 100% { transform: scaleY(1); }
    95%           { transform: scaleY(0.05); }
  }
  .blinking {
    animation: blink 0.18s ease-in-out;
    transform-origin: center;
  }
</style>
</head>
<body>
<div id="app">
  <div id="speech-bubble"></div>

  <div id="bmo-wrapper">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 400 500" id="bmo-svg">
      <!-- ═══ LEGS (behind body) ═══ -->
      <g id="limbs">
        <!-- Left leg -->
        <path id="left-leg" d="M 150 375 L 150 440" fill="none" stroke="#1D2D2A" stroke-width="8" stroke-linecap="round" />
        <ellipse id="left-foot" cx="140" cy="442" rx="14" ry="7" fill="#1D2D2A" />

        <!-- Right leg -->
        <path id="right-leg" d="M 250 375 L 250 440" fill="none" stroke="#1D2D2A" stroke-width="8" stroke-linecap="round" />
        <ellipse id="right-foot" cx="260" cy="442" rx="14" ry="7" fill="#1D2D2A" />
      </g>

      <!-- ═══ BODY ═══ -->
      <g id="body">
        <rect x="100" y="100" width="200" height="280" rx="20" fill="#53C4B6" stroke="#1D2D2A" stroke-width="8" />
        <!-- Inner highlight border -->
        <rect x="108" y="108" width="184" height="264" rx="14" fill="none" stroke="#7BE3D3" stroke-width="4" />
      </g>

      <!-- ═══ ARMS (in front of body, body-colored) ═══ -->
      <g id="left-arm">
        <path d="M 100 260 C 65 268, 45 300, 55 340" fill="none" stroke="#1D2D2A" stroke-width="12" stroke-linecap="round" />
        <path d="M 100 260 C 65 268, 45 300, 55 340" fill="none" stroke="#53C4B6" stroke-width="8" stroke-linecap="round" />
      </g>
      <g id="right-arm">
        <path d="M 300 260 C 335 268, 355 300, 345 340" fill="none" stroke="#1D2D2A" stroke-width="12" stroke-linecap="round" />
        <path d="M 300 260 C 335 268, 355 300, 345 340" fill="none" stroke="#53C4B6" stroke-width="8" stroke-linecap="round" />
      </g>

      <!-- ═══ SCREEN ═══ -->
      <g id="screen">
        <!-- Screen bezel -->
        <rect x="116" y="116" width="168" height="128" rx="12" fill="#2B473F" />
        <!-- Screen display -->
        <rect id="screen-bg" x="120" y="120" width="160" height="120" rx="8" fill="#D1F2DC" style="transition: fill 0.6s ease"/>
        <!-- Screen shine -->
        <polygon points="120,155 165,120 185,120 120,170" fill="#FFFFFF" opacity="0.3" />

        <!-- Eye highlights (lighter circles behind pupils) -->
        <circle cx="145" cy="180" r="8" fill="#8CD6AB" opacity="0.8" />
        <circle cx="255" cy="180" r="8" fill="#8CD6AB" opacity="0.8" />

        <!-- ── LEFT EYE (oval, taller than wide) ── -->
        <g id="left-eye">
          <ellipse cx="160" cy="175" rx="4.5" ry="6.5" fill="#1D2D2A" />
          <path id="left-eye-happy" d="M 150 178 Q 160 168 170 178" fill="none" stroke="#1D2D2A" stroke-width="4" stroke-linecap="round" style="display:none"/>
        </g>

        <!-- ── RIGHT EYE (oval, taller than wide) ── -->
        <g id="right-eye">
          <ellipse cx="240" cy="175" rx="4.5" ry="6.5" fill="#1D2D2A" />
          <path id="right-eye-happy" d="M 230 178 Q 240 168 250 178" fill="none" stroke="#1D2D2A" stroke-width="4" stroke-linecap="round" style="display:none"/>
        </g>

        <!-- ── MOUTH ── -->
        <g id="mouth">
          <!-- Fill layer (dark green interior, behind stroke) -->
          <path id="mouth-fill" d="M 185 195 Q 200 210 215 195" fill="none" stroke="none" />
          <!-- Teeth strip (white, sits at top of mouth opening) -->
          <path id="mouth-teeth" d="" fill="#FFFFFF" stroke="none" style="display:none" />
          <!-- Outline -->
          <path id="mouth-path" d="M 185 195 Q 200 210 215 195" fill="none" stroke="#1D2D2A" stroke-width="5" stroke-linecap="round" />
        </g>
      </g>

      <!-- ═══ DETAILS ═══ -->
      <g id="details">
        <!-- Card slot -->
        <rect x="130" y="260" width="140" height="8" rx="4" fill="#1D2D2A" />
        <rect x="132" y="262" width="136" height="2" rx="1" fill="#3D5A50" />

        <!-- D-pad (yellow) -->
        <path d="M 143 293 h 14 v 10 h 10 v 14 h -10 v 10 h -14 v -10 h -10 v -14 h 10 z" fill="#FBD109" stroke="#1D2D2A" stroke-width="6" stroke-linejoin="round" />

        <!-- Triangle button (teal) -->
        <polygon points="250,278 263,300 237,300" fill="#44E5CF" stroke="#1D2D2A" stroke-width="6" stroke-linejoin="round" />

        <!-- Circle button (green) -->
        <circle cx="235" cy="330" r="10" fill="#69D13E" stroke="#1D2D2A" stroke-width="6" />

        <!-- Big red button -->
        <circle cx="270" cy="315" r="14" fill="#ED2C41" stroke="#1D2D2A" stroke-width="6" />

        <!-- Bottom speaker dots -->
        <rect x="180" y="340" width="16" height="8" rx="4" fill="#1D2D2A" />
        <rect x="204" y="340" width="16" height="8" rx="4" fill="#1D2D2A" />

        <!-- Bottom speaker grilles -->
        <rect x="135" y="355" width="28" height="12" rx="4" fill="#1D2D2A" />
        <rect x="237" y="355" width="28" height="12" rx="4" fill="#1D2D2A" />
      </g>
    </svg>
  </div>

  <!-- Shadow under BMO -->
  <div id="bmo-shadow"></div>

  <!-- Sparkle container -->
  <div id="sparkles"></div>
</div>

<style>
  #bmo-shadow {
    width: 100px;
    height: 12px;
    background: radial-gradient(ellipse, rgba(0,0,0,0.2) 0%, transparent 70%);
    border-radius: 50%;
    margin-top: -42px;
    transition: all 0.5s ease;
    flex-shrink: 0;
  }

  /* Sitting pose */
  #bmo-wrapper.sitting {
    animation: none !important;
    transform: translateY(20px);
  }
  #bmo-wrapper.sitting #legs path {
    transition: d 0.5s ease;
  }

  /* Sparkles */
  #sparkles {
    position: absolute;
    top: 0; left: 0; right: 0; bottom: 0;
    pointer-events: none;
    z-index: 200;
  }
  .sparkle {
    position: absolute;
    font-size: 16px;
    animation: sparkle-float 1s ease-out forwards;
    pointer-events: none;
  }
  @keyframes sparkle-float {
    0% { opacity: 1; transform: translateY(0) scale(1); }
    100% { opacity: 0; transform: translateY(-40px) scale(0.3); }
  }

  /* Click feedback */
  #bmo-wrapper.clicked {
    transition: transform 0.1s;
    transform: scale(0.95);
  }

  /* ─── Emotion body classes ─── */
  @keyframes emotion-sway-happy {
    0%, 100% { transform: translateY(0) rotate(0deg); }
    25% { transform: translateY(-6px) rotate(1.5deg); }
    75% { transform: translateY(-4px) rotate(-1.5deg); }
  }
  #bmo-wrapper.emotion-happy { animation: emotion-sway-happy 0.8s ease-in-out infinite; }

  @keyframes emotion-bounce-excited {
    0%, 100% { transform: translateY(0) scale(1); }
    20% { transform: translateY(-12px) scale(1.04); }
    40% { transform: translateY(-2px) scale(0.98); }
    60% { transform: translateY(-10px) scale(1.03); }
    80% { transform: translateY(-1px) scale(0.99); }
  }
  #bmo-wrapper.emotion-excited { animation: emotion-bounce-excited 0.5s ease-in-out infinite; }

  @keyframes emotion-think {
    0%, 100% { transform: translateY(0) rotate(0deg); }
    50% { transform: translateY(-3px) rotate(2deg); }
  }
  #bmo-wrapper.emotion-thinking { animation: emotion-think 2s ease-in-out infinite; }

  @keyframes emotion-sad-droop {
    0%, 100% { transform: translateY(3px) rotate(-1deg); }
    50% { transform: translateY(5px) rotate(-2deg); }
  }
  #bmo-wrapper.emotion-sad { animation: emotion-sad-droop 3s ease-in-out infinite; }

  @keyframes emotion-surprised-jolt {
    0% { transform: translateY(0) scale(1); }
    10% { transform: translateY(-15px) scale(1.08); }
    30% { transform: translateY(-5px) scale(1.02); }
    100% { transform: translateY(0) scale(1); }
  }
  #bmo-wrapper.emotion-surprised { animation: emotion-surprised-jolt 0.4s ease-out 1; }

  @keyframes emotion-love-sway {
    0%, 100% { transform: rotate(0deg); }
    25% { transform: rotate(3deg) translateX(3px); }
    75% { transform: rotate(-3deg) translateX(-3px); }
  }
  #bmo-wrapper.emotion-love { animation: emotion-love-sway 1.2s ease-in-out infinite; }

  @keyframes emotion-curious-tilt {
    0%, 100% { transform: rotate(0deg); }
    50% { transform: rotate(5deg) translateY(-3px); }
  }
  #bmo-wrapper.emotion-curious { animation: emotion-curious-tilt 1.5s ease-in-out infinite; }

  @keyframes emotion-proud-tall {
    0%, 100% { transform: translateY(0) scale(1); }
    50% { transform: translateY(-5px) scale(1.03); }
  }
  #bmo-wrapper.emotion-proud { animation: emotion-proud-tall 1s ease-in-out infinite; }

  @keyframes emotion-scared-shake {
    0%, 100% { transform: translateX(0); }
    10% { transform: translateX(-2px) rotate(-1deg); }
    30% { transform: translateX(2px) rotate(1deg); }
    50% { transform: translateX(-1px); }
    70% { transform: translateX(1px) rotate(-0.5deg); }
    90% { transform: translateX(-1px); }
  }
  #bmo-wrapper.emotion-scared { animation: emotion-scared-shake 0.3s ease-in-out infinite; }

  @keyframes emotion-mischief-lean {
    0%, 100% { transform: rotate(0deg); }
    50% { transform: rotate(-4deg) translateX(-2px); }
  }
  #bmo-wrapper.emotion-mischief { animation: emotion-mischief-lean 1.5s ease-in-out infinite; }

  /* Heart sparkle (slower float) */
  .sparkle-heart {
    animation: sparkle-float 2s ease-out forwards !important;
  }
</style>

<script src="bmo.js"></script>
</body>
</html>
