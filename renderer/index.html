<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>JoeMac Avatar</title>
<link rel="preconnect" href="https://fonts.googleapis.com" />
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
<link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600&display=swap" rel="stylesheet" />
<style>
  * { margin: 0; padding: 0; box-sizing: border-box; }

  html, body {
    width: 100%;
    height: 100%;
    overflow: hidden;
    background: transparent !important;
    -webkit-app-region: no-drag;
    font-family: 'Space Grotesk', system-ui, sans-serif;
  }

  #app {
    width: 100%;
    height: 100%;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: flex-end;
    padding-bottom: 5px;
    padding-top: 60px;
    position: relative;
    user-select: none;
    background: transparent !important;
  }

  /* ─── Speech bubble ─── */
  #speech-bubble {
    position: absolute;
    top: 5px;
    left: 50%;
    transform: translateX(-50%);
    background: rgba(255, 255, 255, 0.96);
    color: #1a1a2e;
    border-radius: 14px;
    padding: 10px 14px;
    max-width: 250px;
    width: max-content;
    font-size: 13px;
    font-weight: 500;
    line-height: 1.4;
    word-wrap: break-word;
    white-space: pre-wrap;
    box-shadow: 0 4px 20px rgba(0,0,0,0.18), 0 1px 4px rgba(0,0,0,0.10);
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.3s ease;
    z-index: 100;
    filter: drop-shadow(0 2px 6px rgba(0,0,0,0.12));
  }
  #speech-bubble::after {
    content: '';
    position: absolute;
    bottom: -8px;
    left: 50%;
    transform: translateX(-50%);
    width: 0; height: 0;
    border-left: 9px solid transparent;
    border-right: 9px solid transparent;
    border-top: 9px solid rgba(255,255,255,0.96);
  }
  #speech-bubble.visible + #bmo-wrapper {
    /* slight nudge when bubble is showing */
  }
  #speech-bubble.visible { opacity: 1; }

  /* ─── BMO container ─── */
  #bmo-wrapper {
    position: relative;
    width: 300px;
    height: 400px;
    -webkit-app-region: drag;
    cursor: grab;
  }
  #bmo-wrapper:active { cursor: grabbing; }
  #bmo-wrapper svg { width: 100%; height: 100%; overflow: visible; }

  /* ─── IDLE float ─── */
  @keyframes bmo-float {
    0%, 100% { transform: translateY(0px); }
    40%      { transform: translateY(-7px); }
    60%      { transform: translateY(-5px); }
  }
  #bmo-wrapper {
    animation: bmo-float 4s ease-in-out infinite;
    transform-origin: center bottom;
  }

  /* ─── IDLE arm sway ─── */
  @keyframes idle-sway-left {
    0%, 100% { transform: rotate(0deg); }
    30%      { transform: rotate(3deg); }
    70%      { transform: rotate(-2deg); }
  }
  @keyframes idle-sway-right {
    0%, 100% { transform: rotate(0deg); }
    40%      { transform: rotate(-3deg); }
    80%      { transform: rotate(2deg); }
  }
  #left-arm {
    animation: idle-sway-left 5s ease-in-out infinite;
    transform-origin: 105px 220px;
  }
  #right-arm {
    animation: idle-sway-right 5.5s ease-in-out infinite;
    transform-origin: 295px 220px;
  }

  /* ─── WAVE (left arm — the one that goes up) ─── */
  @keyframes arm-wave {
    0%   { transform: rotate(0deg); }
    15%  { transform: rotate(30deg); }
    30%  { transform: rotate(5deg); }
    45%  { transform: rotate(35deg); }
    60%  { transform: rotate(10deg); }
    75%  { transform: rotate(30deg); }
    100% { transform: rotate(0deg); }
  }
  #left-arm.wave {
    animation: arm-wave 0.6s ease-in-out 3;
    transform-origin: 105px 220px;
  }

  /* ─── WAVE (right arm) ─── */
  #right-arm.wave {
    animation: arm-wave 0.6s ease-in-out 3;
    transform-origin: 295px 240px;
  }

  /* ─── THINKING ─── */
  @keyframes bmo-think {
    0%, 100% { transform: translateY(0px); }
    50%      { transform: translateY(-3px); }
  }
  #bmo-wrapper.thinking { animation: bmo-think 1.5s ease-in-out infinite; }

  @keyframes arm-think {
    0%, 100% { transform: rotate(0deg); }
    50%      { transform: rotate(25deg); }
  }
  #left-arm.thinking {
    animation: arm-think 1.5s ease-in-out infinite;
    transform-origin: 105px 220px;
  }

  @keyframes eye-look-side {
    0%, 100% { transform: translateX(0); }
    50%      { transform: translateX(4px); }
  }
  #bmo-wrapper.thinking #left-eye,
  #bmo-wrapper.thinking #right-eye {
    animation: eye-look-side 1.5s ease-in-out infinite;
  }

  /* ─── SPEAKING ─── */
  @keyframes bmo-speak-bob {
    0%, 100% { transform: translateY(0px); }
    25%      { transform: translateY(-4px); }
    75%      { transform: translateY(-1px); }
  }
  #bmo-wrapper.speaking { animation: bmo-speak-bob 0.35s ease-in-out infinite; }

  @keyframes arm-gesture-left {
    0%, 100% { transform: rotate(0deg); }
    30%      { transform: rotate(15deg); }
    60%      { transform: rotate(-8deg); }
  }
  @keyframes arm-gesture-right {
    0%, 100% { transform: rotate(0deg); }
    30%      { transform: rotate(-10deg); }
    60%      { transform: rotate(5deg); }
  }
  #bmo-wrapper.speaking #left-arm {
    animation: arm-gesture-left 0.6s ease-in-out infinite;
    transform-origin: 105px 220px;
  }
  #bmo-wrapper.speaking #right-arm {
    animation: arm-gesture-right 0.6s ease-in-out 0.1s infinite;
    transform-origin: 295px 240px;
  }

  @keyframes screen-glow {
    0%, 100% { filter: drop-shadow(0 0 2px rgba(209,242,220,0.3)); }
    50%      { filter: drop-shadow(0 0 10px rgba(209,242,220,0.6)); }
  }
  #bmo-wrapper.speaking #screen { animation: screen-glow 0.5s ease-in-out infinite; }

  /* ─── HAPPY ─── */
  @keyframes bmo-bounce {
    0%, 100% { transform: translateY(0px) scale(1); }
    30%      { transform: translateY(-14px) scale(1.03); }
    50%      { transform: translateY(-8px) scale(1.01); }
    70%      { transform: translateY(-16px) scale(1.03); }
  }
  #bmo-wrapper.happy { animation: bmo-bounce 0.6s ease-in-out 2; }

  @keyframes arms-happy-left {
    0%, 100% { transform: rotate(0deg); }
    40%      { transform: rotate(40deg); }
    70%      { transform: rotate(30deg); }
  }
  @keyframes arms-happy-right {
    0%, 100% { transform: rotate(0deg); }
    40%      { transform: rotate(-30deg); }
    70%      { transform: rotate(-20deg); }
  }
  #bmo-wrapper.happy #left-arm {
    animation: arms-happy-left 0.6s ease-in-out 2;
    transform-origin: 105px 220px;
  }
  #bmo-wrapper.happy #right-arm {
    animation: arms-happy-right 0.6s ease-in-out 2 0.05s;
    transform-origin: 295px 240px;
  }

  /* ─── SLEEP ─── */
  @keyframes bmo-sleep {
    0%, 100% { transform: translateY(0px) rotate(0deg); }
    30%      { transform: translateY(2px) rotate(2deg); }
    70%      { transform: translateY(2px) rotate(-1deg); }
  }

  /* ─── BLINK ─── */
  @keyframes blink {
    0%, 90%, 100% { transform: scaleY(1); }
    95%           { transform: scaleY(0.05); }
  }
  .blinking {
    animation: blink 0.18s ease-in-out;
    transform-origin: center;
  }
</style>
</head>
<body>
<div id="app">
  <div id="speech-bubble"></div>

  <div id="bmo-wrapper">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 400 500" id="bmo-svg">
      <!-- ═══ LIMBS (behind body) ═══ -->
      <g id="limbs">
        <!-- Left arm (raised one) -->
        <g id="left-arm">
          <path d="M 105 220 C 70 230, 50 270, 60 310" fill="none" stroke="#1D2D2A" stroke-width="8" stroke-linecap="round" />
        </g>

        <!-- Right arm (hanging) -->
        <g id="right-arm">
          <path d="M 295 220 C 330 230, 350 270, 340 310" fill="none" stroke="#1D2D2A" stroke-width="8" stroke-linecap="round" />
        </g>

        <!-- Left leg -->
        <path d="M 150 375 L 150 440" fill="none" stroke="#1D2D2A" stroke-width="8" stroke-linecap="round" />
        <ellipse cx="140" cy="442" rx="14" ry="7" fill="#1D2D2A" />

        <!-- Right leg -->
        <path d="M 250 375 L 250 440" fill="none" stroke="#1D2D2A" stroke-width="8" stroke-linecap="round" />
        <ellipse cx="260" cy="442" rx="14" ry="7" fill="#1D2D2A" />
      </g>

      <!-- ═══ BODY ═══ -->
      <g id="body">
        <rect x="100" y="100" width="200" height="280" rx="20" fill="#53C4B6" stroke="#1D2D2A" stroke-width="8" />
        <!-- Inner highlight border -->
        <rect x="108" y="108" width="184" height="264" rx="14" fill="none" stroke="#7BE3D3" stroke-width="4" />
      </g>

      <!-- ═══ SCREEN ═══ -->
      <g id="screen">
        <!-- Screen bezel -->
        <rect x="116" y="116" width="168" height="128" rx="12" fill="#2B473F" />
        <!-- Screen display -->
        <rect x="120" y="120" width="160" height="120" rx="8" fill="#D1F2DC" />
        <!-- Screen shine -->
        <polygon points="120,155 165,120 185,120 120,170" fill="#FFFFFF" opacity="0.3" />

        <!-- Eye highlights (lighter circles behind pupils) -->
        <circle cx="145" cy="180" r="8" fill="#8CD6AB" opacity="0.8" />
        <circle cx="255" cy="180" r="8" fill="#8CD6AB" opacity="0.8" />

        <!-- ── LEFT EYE ── -->
        <g id="left-eye">
          <circle cx="160" cy="175" r="6" fill="#1D2D2A" />
        </g>

        <!-- ── RIGHT EYE ── -->
        <g id="right-eye">
          <circle cx="240" cy="175" r="6" fill="#1D2D2A" />
        </g>

        <!-- ── MOUTH ── -->
        <g id="mouth">
          <path id="mouth-path" d="M 185 195 Q 200 210 215 195" fill="none" stroke="#1D2D2A" stroke-width="5" stroke-linecap="round" />
        </g>
      </g>

      <!-- ═══ DETAILS ═══ -->
      <g id="details">
        <!-- Card slot -->
        <rect x="130" y="260" width="140" height="8" rx="4" fill="#1D2D2A" />
        <rect x="132" y="262" width="136" height="2" rx="1" fill="#3D5A50" />

        <!-- D-pad (yellow) -->
        <path d="M 143 293 h 14 v 10 h 10 v 14 h -10 v 10 h -14 v -10 h -10 v -14 h 10 z" fill="#FBD109" stroke="#1D2D2A" stroke-width="6" stroke-linejoin="round" />

        <!-- Triangle button (teal) -->
        <polygon points="250,278 263,300 237,300" fill="#44E5CF" stroke="#1D2D2A" stroke-width="6" stroke-linejoin="round" />

        <!-- Circle button (green) -->
        <circle cx="235" cy="330" r="10" fill="#69D13E" stroke="#1D2D2A" stroke-width="6" />

        <!-- Big red button -->
        <circle cx="270" cy="315" r="14" fill="#ED2C41" stroke="#1D2D2A" stroke-width="6" />

        <!-- Bottom speaker dots -->
        <rect x="180" y="340" width="16" height="8" rx="4" fill="#1D2D2A" />
        <rect x="204" y="340" width="16" height="8" rx="4" fill="#1D2D2A" />

        <!-- Bottom speaker grilles -->
        <rect x="135" y="355" width="28" height="12" rx="4" fill="#1D2D2A" />
        <rect x="237" y="355" width="28" height="12" rx="4" fill="#1D2D2A" />
      </g>
    </svg>
  </div>
</div>

<script src="bmo.js"></script>
</body>
</html>
